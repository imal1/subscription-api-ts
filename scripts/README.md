# Scripts ç›®å½•è¯´æ˜

è¿™ä¸ªç›®å½•åŒ…å«äº† Subscription API TypeScript é¡¹ç›®çš„æ‰€æœ‰ç®¡ç†è„šæœ¬ã€‚

## ğŸ¯ è®¾è®¡ç‰¹ç‚¹

- **ğŸ“¦ æ¨¡å—åŒ–è®¾è®¡**ï¼šå°†åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å‡½æ•°åº“
- **ğŸ”§ ç»Ÿä¸€ç®¡ç†**ï¼šä¸€ä¸ªè„šæœ¬ç®¡ç†æ‰€æœ‰åŠŸèƒ½
- **ğŸ’° ä»£ç ç²¾ç®€**ï¼šæ¨¡å—åŒ–çš„å‡½æ•°åº“è®¾è®¡
- **ğŸš€ æ˜“äºä½¿ç”¨**ï¼šç®€å•æ˜äº†çš„å‘½ä»¤è¡Œæ¥å£
- **ğŸ”„ å‘åå…¼å®¹**ï¼šä¿æŒåŸæœ‰åŠŸèƒ½çš„åŒæ—¶æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ manage.sh           # ç»Ÿä¸€ç®¡ç†è„šæœ¬ï¼ˆä¸»è¦å…¥å£ï¼‰
â”œâ”€â”€ install.sh          # å¿«é€Ÿå®‰è£…è„šæœ¬
â”œâ”€â”€ README.md          # è¯´æ˜æ–‡æ¡£
â””â”€â”€ lib/               # å‡½æ•°åº“ç›®å½•
    â”œâ”€â”€ core.sh        # æ ¸å¿ƒå·¥å…·å‡½æ•°
    â”œâ”€â”€ system.sh      # ç³»ç»Ÿæ£€æµ‹å’Œç¯å¢ƒç®¡ç†
    â”œâ”€â”€ config.sh      # é…ç½®æ–‡ä»¶ç®¡ç†
    â”œâ”€â”€ service.sh     # æœåŠ¡ç®¡ç†
    â”œâ”€â”€ install.sh     # å®‰è£…ç›¸å…³å‡½æ•°
    â””â”€â”€ build.sh       # æ„å»ºç›¸å…³å‡½æ•°
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®Œæ•´å®‰è£…
```bash
# ä½¿ç”¨å¿«é€Ÿå®‰è£…è„šæœ¬
bash scripts/install.sh

# æˆ–è€…ä½¿ç”¨ç®¡ç†è„šæœ¬
bash scripts/manage.sh setup
```

### æ—¥å¸¸ä½¿ç”¨
```bash
# æŸ¥çœ‹å¸®åŠ©
bash scripts/manage.sh help

# æ„å»ºé¡¹ç›®
bash scripts/manage.sh build

# æœåŠ¡ç®¡ç† (Linux)
sudo bash scripts/manage.sh start
sudo bash scripts/manage.sh status
sudo bash scripts/manage.sh logs

# ç³»ç»Ÿæ£€æŸ¥
bash scripts/manage.sh check
```

## ğŸ“‹ å®Œæ•´å‘½ä»¤åˆ—è¡¨

### ç¯å¢ƒç®¡ç†
- `init` - åˆå§‹åŒ–é¡¹ç›®ç¯å¢ƒ
- `setup` - å®Œæ•´å®‰è£…é…ç½®
- `env` - æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
- `config` - æ˜¾ç¤ºé…ç½®ä¿¡æ¯

### æ„å»ºç›¸å…³
- `build` - æ„å»ºé¡¹ç›®ï¼ˆåç«¯+å‰ç«¯ï¼‰
- `build-backend` - ä»…æ„å»ºåç«¯
- `build-frontend` - ä»…æ„å»ºå‰ç«¯
- `clean` - æ¸…ç†æ„å»ºæ–‡ä»¶

### æœåŠ¡ç®¡ç†ï¼ˆä»… Linuxï¼‰
- `start` - å¯åŠ¨æœåŠ¡
- `stop` - åœæ­¢æœåŠ¡
- `restart` - é‡å¯æœåŠ¡
- `status` - æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- `logs` - æŸ¥çœ‹æœåŠ¡æ—¥å¿—
- `logs-f` - å®æ—¶è·Ÿè¸ªæ—¥å¿—

### ç»´æŠ¤å·¥å…·
- `check` - ç³»ç»Ÿæ£€æŸ¥
- `verify` - éªŒè¯æƒé™
- `update` - æ›´æ–°é¡¹ç›®ï¼ˆå¼€å‘ä¸­ï¼‰
- `backup` - å¤‡ä»½é…ç½®ï¼ˆå¼€å‘ä¸­ï¼‰

## ğŸ”§ å‡½æ•°åº“è¯´æ˜

### core.sh - æ ¸å¿ƒå·¥å…·å‡½æ•°
- é¢œè‰²å®šä¹‰å’ŒçŠ¶æ€æ‰“å°
- åŸºç¡€æ–‡ä»¶/ç›®å½•æ“ä½œ
- ç‰ˆæœ¬ä¿¡æ¯ç®¡ç†
- ç•Œé¢æ˜¾ç¤ºå‡½æ•°

### system.sh - ç³»ç»Ÿæ£€æµ‹å’Œç¯å¢ƒç®¡ç†
- æ“ä½œç³»ç»Ÿå’Œæ¶æ„æ£€æµ‹
- ç”¨æˆ·æƒé™ç®¡ç†
- ç¯å¢ƒå˜é‡è®¾ç½®
- ç³»ç»Ÿä¾èµ–æ£€æŸ¥

### config.sh - é…ç½®æ–‡ä»¶ç®¡ç†
- YAML é…ç½®æ–‡ä»¶è§£æ
- yq å·¥å…·è‡ªåŠ¨å®‰è£…
- é…ç½®æ–‡ä»¶åˆ›å»ºå’Œæ›´æ–°

### service.sh - æœåŠ¡ç®¡ç†
- systemd æœåŠ¡æ“ä½œ
- æœåŠ¡çŠ¶æ€æ£€æŸ¥
- æ—¥å¿—æŸ¥çœ‹åŠŸèƒ½

### install.sh - å®‰è£…ç›¸å…³å‡½æ•°
- äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½
- bun å’Œ mihomo å®‰è£…
- æ–‡ä»¶æƒé™è®¾ç½®

### build.sh - æ„å»ºç›¸å…³å‡½æ•°
- å‰ç«¯å’Œåç«¯æ„å»º
- æ„å»ºæ–‡ä»¶ç®¡ç†
- ä¾èµ–æ£€æŸ¥

## ğŸ¨ ä½¿ç”¨ç¤ºä¾‹

### å¼€å‘ç¯å¢ƒ
```bash
# åˆå§‹åŒ–å¼€å‘ç¯å¢ƒ
bash scripts/manage.sh init

# æ„å»ºé¡¹ç›®
bash scripts/manage.sh build

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd /path/to/project
bun run dev
```

### ç”Ÿäº§ç¯å¢ƒ (Linux)
```bash
# å®Œæ•´å®‰è£…
sudo bash scripts/manage.sh setup

# å¯åŠ¨æœåŠ¡
sudo bash scripts/manage.sh start

# æŸ¥çœ‹çŠ¶æ€
sudo bash scripts/manage.sh status

# å®æ—¶æ—¥å¿—
sudo bash scripts/manage.sh logs-f
```

### æ—¥å¸¸ç»´æŠ¤
```bash
# ç³»ç»Ÿæ£€æŸ¥
bash scripts/manage.sh check

# æƒé™éªŒè¯
bash scripts/manage.sh verify

# é‡æ–°æ„å»º
bash scripts/manage.sh build

# é‡å¯æœåŠ¡
sudo bash scripts/manage.sh restart
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æƒé™è¦æ±‚**ï¼šæŸäº›æ“ä½œéœ€è¦ root æƒé™ï¼Œä½¿ç”¨ `sudo` æ‰§è¡Œ
2. **ç³»ç»Ÿæ”¯æŒ**ï¼šå®Œå…¨æ”¯æŒ Linux å’Œ macOSï¼ŒæœåŠ¡ç®¡ç†åŠŸèƒ½ä»…é€‚ç”¨äº Linux
3. **ä¾èµ–æ£€æŸ¥**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£…å¿…è¦çš„ä¾èµ–
4. **é…ç½®æ–‡ä»¶**ï¼šé»˜è®¤é…ç½®æ–‡ä»¶ä½äº `~/.config/subscription/config.yaml`

## ğŸ› æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ä¾æ¬¡å°è¯•ï¼š

1. **æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒ**
   ```bash
   bash scripts/manage.sh check
   ```

2. **éªŒè¯æƒé™**
   ```bash
   bash scripts/manage.sh verify
   ```

3. **é‡æ–°åˆå§‹åŒ–**
   ```bash
   bash scripts/manage.sh init
   ```

4. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   ```bash
   bash scripts/manage.sh logs
   ```

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹å†…ç½®å¸®åŠ©ï¼š`bash scripts/manage.sh help`
- æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ï¼š`bash scripts/manage.sh check`
- æŸ¥çœ‹ç¯å¢ƒä¿¡æ¯ï¼š`bash scripts/manage.sh env`
